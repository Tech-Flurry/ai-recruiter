variables:
  CODE_PATH: "**/src/AiRecruiterCodeBase/"

pool:
  vmImage: windows-latest

steps:
  - script: echo Building API
    displayName: "Comment"
    
  - task: UseDotNet@2 
    inputs:
      packageType: 'sdk'
      version: '9.x'
      installationPath: '$(Agent.ToolsDirectory)/dotnet'

  - task: DotNetCoreCLI@2
    displayName: Restore Packages
    inputs:
      command: "restore"
      projects: "$(CODE_PATH)**/*.csproj"
      feedsToUse: "select"
      #vstsFeed: "$(VSTS_FEED)"

  - task: DotNetCoreCLI@2
    displayName: Build API
    inputs:
      command: "build"
      projects: "$(CODE_PATH)**/*.csproj"
      arguments: "--configuration Release /p:Version=$(VERSION_PREFIX).$(Build.BuildId)"

  - task: DotNetCoreCLI@2
    displayName: Test API
    inputs:
      command: test
      projects: "$(CODE_PATH)**.[Tt]ests/*.csproj"
      arguments: "--configuration Release"





